# virc server configuration
# Copy to .env and edit: cp .env.example .env

# ==============================================================================
# REQUIRED — you must set these before running
# ==============================================================================

# Secret for signing JWT tokens. Generate with: openssl rand -base64 32
JWT_SECRET=change-me-to-a-random-string

# LiveKit API credentials (used by virc-files and injected into LiveKit config).
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=devsecret

# ==============================================================================
# SERVER IDENTITY
# ==============================================================================

# Display name shown to clients
# SERVER_NAME=My virc Server

# Stable server identifier used in JWTs and invite links (URL-safe).
# Typically your public hostname (without scheme).
# Examples: "chat.example.com", "localhost:8080"
# SERVER_ID=chat.example.com

# MySQL root password — docker-compose syncs this into Ergo via env override
MYSQL_ROOT_PASSWORD=changeme

# ==============================================================================
# NETWORKING
# ==============================================================================

# Caddy site address. Set to your domain for automatic HTTPS, or :80 for plain HTTP.
# Examples: "chat.example.com", ":80", "localhost:8080"
# SITE_ADDRESS=:80

# LiveKit WebSocket URL returned to clients (set to your LAN/public IP for remote access)
# LIVEKIT_CLIENT_URL=ws://192.168.1.100:7880

# Restrict CORS to specific origin(s). Comma-separated list.
# When unset, all cross-origin requests are rejected.
# ALLOWED_ORIGIN=https://chat.example.com,https://app.example.com

# Base URL for generated invite links (falls back to request Origin/Host if unset)
# BASE_URL=https://chat.example.com

# Restrict IRC WebSocket origins (JSON array). Defaults to localhost in docker-compose.
# Example:
# ERGO_WEBSOCKET_ORIGINS=["https://chat.example.com"]

# Bearer token for Ergo HTTP API (used by virc-files; injected into Ergo config).
# Generate with: openssl rand -base64 32
ERGO_API_TOKEN=dev-ergo-api-token

# ==============================================================================
# FILE UPLOADS
# ==============================================================================

# Max upload size in bytes (default: 25 MB)
# MAX_FILE_SIZE=26214400

# ==============================================================================
# TUNING (defaults are sensible — only change if needed)
# ==============================================================================

# JWT lifetime in seconds (default: 3600 = 1 hour)
# JWT_EXPIRY=3600

# Ergo IRC server API (internal Docker address)
# ERGO_API=http://ergo:8089

# NOTE: If you change ERGO_API_TOKEN, restart containers so Ergo picks it up.

# Rate limits (requests per window). Defaults are reasonable for most deployments.
# RATE_LIMIT_AUTH_MAX=10
# RATE_LIMIT_AUTH_WINDOW=900000
# RATE_LIMIT_PREVIEW_MAX=30
# RATE_LIMIT_UPLOAD_MAX=20
# RATE_LIMIT_INVITE_MAX=10
# RATE_LIMIT_WINDOW=60000
