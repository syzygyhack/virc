/* ==========================================================================
   accord — Global Design Tokens & Base Styles
   Source of truth: FRONTEND.md
   ========================================================================== */

/* System fonts — no external font loading. Reduces binary/network overhead
   and avoids FOUT. A native chat app should feel native. */

/* ==========================================================================
   Dark Theme (default)
   Defined on :root as fallback when data-theme attribute is missing,
   and on [data-theme="dark"] for explicit selection.
   ========================================================================== */

:root,
:root[data-theme="dark"] {
  /* Surface hierarchy */
  --surface-lowest:   #1a1a1e;
  --surface-low:      #1e1f24;
  --surface-base:     #27282d;
  --surface-high:     #2e3035;
  --surface-highest:  #383a40;

  /* Text hierarchy */
  --text-primary:     #e0e0e4;
  --text-secondary:   #9a9da3;
  --text-muted:       #72767d;
  --text-link:        #5b9ef0;
  --text-inverse:     #1a1a1e;

  /* Interactive states */
  --interactive-normal: #b0b3b8;
  --interactive-hover:  #dcddde;
  --interactive-active: #ffffff;
  --interactive-muted:  #4e5058;

  /* Accent / Brand */
  --accent-primary:   #5b9ef0;
  --accent-secondary: #4a8fe0;
  --accent-bg:        rgba(91, 158, 240, 0.12);

  /* Status */
  --status-online:    #23a559;
  --status-idle:      #f0b232;
  --status-dnd:       #f23f43;
  --status-offline:   #80848e;

  /* Semantic */
  --danger:           #e04040;
  --danger-bg:        rgba(224, 64, 64, 0.12);
  --warning:          #f0b232;
  --warning-bg:       rgba(240, 178, 50, 0.12);
  --success:          #3dba6c;
  --success-bg:       rgba(59, 165, 93, 0.12);
  --info:             #5b9ef0;

  /* Shadows */
  --shadow-sm:  0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-md:  0 4px 8px rgba(0, 0, 0, 0.3);
  --shadow-lg:  0 8px 24px rgba(0, 0, 0, 0.4);
  --overlay-backdrop: rgba(0, 0, 0, 0.6);

  /* Z-index scale */
  --z-base:     1;
  --z-sidebar:  100;
  --z-overlay:  200;
  --z-modal:    1000;
  --z-popover:  1100;

  /* Message-specific */
  --msg-hover-bg:         rgba(0, 0, 0, 0.06);
  --msg-mention-bg:       rgba(250, 180, 50, 0.08);
  --msg-mention-border:   #f0b232;
  --msg-gutter:           72px;

  /* Compact spacing defaults */
  --msg-padding-y:    4px;
  --msg-padding-x:    16px;
  --msg-font-size:    var(--font-base);
  --msg-line-height:  1.5;
  --msg-group-gap:    16px;
}

/* ==========================================================================
   Light Theme
   ========================================================================== */

:root[data-theme="light"] {
  /* Surface hierarchy */
  --surface-lowest:   #e3e5e8;
  --surface-low:      #ebedef;
  --surface-base:     #ffffff;
  --surface-high:     #f2f3f5;
  --surface-highest:  #ffffff;

  /* Text hierarchy */
  --text-primary:     #1a1a1e;
  --text-secondary:   #5c5f66;
  --text-muted:       #9a9da3;
  --text-link:        #2563c4;
  --text-inverse:     #ffffff;

  /* Interactive states */
  --interactive-normal: #5c5f66;
  --interactive-hover:  #3a3d42;
  --interactive-active: #1a1a1e;
  --interactive-muted:  #c0c3c8;

  /* Accent / Brand */
  --accent-primary:   #2563c4;
  --accent-secondary: #1d4fa0;
  --accent-bg:        rgba(37, 99, 196, 0.10);

  /* Status */
  --status-online:    #23a559;
  --status-idle:      #f0b232;
  --status-dnd:       #f23f43;
  --status-offline:   #80848e;

  /* Semantic */
  --danger:           #d03030;
  --danger-bg:        rgba(208, 48, 48, 0.10);
  --warning:          #d09e20;
  --warning-bg:       rgba(208, 158, 32, 0.10);
  --success:          #2d9a56;
  --success-bg:       rgba(45, 154, 86, 0.10);
  --info:             #2563c4;

  /* Message-specific */
  --msg-hover-bg:         rgba(0, 0, 0, 0.03);
  --msg-mention-bg:       rgba(250, 180, 50, 0.10);
  --msg-mention-border:   #d09e20;
}

/* ==========================================================================
   AMOLED Theme — true black surfaces, inherits dark text/accent
   ========================================================================== */

:root[data-theme="amoled"] {
  /* Surface hierarchy — true black for OLED */
  --surface-lowest:   #000000;
  --surface-low:      #0a0a0a;
  --surface-base:     #111111;
  --surface-high:     #1a1a1a;
  --surface-highest:  #222222;

  /* Text — inherited from dark defaults */
  --text-primary:     #e0e0e4;
  --text-secondary:   #9a9da3;
  --text-muted:       #72767d;
  --text-link:        #5b9ef0;
  --text-inverse:     #000000;

  /* Interactive states */
  --interactive-normal: #b0b3b8;
  --interactive-hover:  #dcddde;
  --interactive-active: #ffffff;
  --interactive-muted:  #4e5058;

  /* Accent / Brand */
  --accent-primary:   #5b9ef0;
  --accent-secondary: #4a8fe0;
  --accent-bg:        rgba(91, 158, 240, 0.15);

  /* Status */
  --status-online:    #23a559;
  --status-idle:      #f0b232;
  --status-dnd:       #f23f43;
  --status-offline:   #80848e;

  /* Semantic */
  --danger:           #e04040;
  --danger-bg:        rgba(224, 64, 64, 0.15);
  --warning:          #f0b232;
  --warning-bg:       rgba(240, 178, 50, 0.15);
  --success:          #3dba6c;
  --success-bg:       rgba(59, 165, 93, 0.15);
  --info:             #5b9ef0;

  /* Message-specific */
  --msg-hover-bg:         rgba(255, 255, 255, 0.04);
  --msg-mention-bg:       rgba(250, 180, 50, 0.10);
  --msg-mention-border:   #f0b232;
}

/* ==========================================================================
   Compact / IRC Classic Theme — dark colors + tighter spacing
   ========================================================================== */

:root[data-theme="compact"] {
  /* Surface — same as dark */
  --surface-lowest:   #1a1a1e;
  --surface-low:      #1e1f24;
  --surface-base:     #27282d;
  --surface-high:     #2e3035;
  --surface-highest:  #383a40;

  /* Text */
  --text-primary:     #e0e0e4;
  --text-secondary:   #9a9da3;
  --text-muted:       #72767d;
  --text-link:        #5b9ef0;
  --text-inverse:     #1a1a1e;

  /* Interactive states */
  --interactive-normal: #b0b3b8;
  --interactive-hover:  #dcddde;
  --interactive-active: #ffffff;
  --interactive-muted:  #4e5058;

  /* Accent / Brand */
  --accent-primary:   #5b9ef0;
  --accent-secondary: #4a8fe0;
  --accent-bg:        rgba(91, 158, 240, 0.12);

  /* Status */
  --status-online:    #23a559;
  --status-idle:      #f0b232;
  --status-dnd:       #f23f43;
  --status-offline:   #80848e;

  /* Semantic */
  --danger:           #e04040;
  --danger-bg:        rgba(224, 64, 64, 0.12);
  --warning:          #f0b232;
  --warning-bg:       rgba(240, 178, 50, 0.12);
  --success:          #3dba6c;
  --success-bg:       rgba(59, 165, 93, 0.12);
  --info:             #5b9ef0;

  /* Message-specific */
  --msg-hover-bg:         rgba(0, 0, 0, 0.06);
  --msg-mention-bg:       rgba(250, 180, 50, 0.08);
  --msg-mention-border:   #f0b232;

  /* Compact spacing overrides */
  --msg-padding-y:    1px;
  --msg-padding-x:    8px;
  --msg-font-size:    13px;
  --msg-line-height:  1.3;
  --msg-group-gap:    0;
  --nick-width:       120px;
  --show-avatars:     none;
}

/* ==========================================================================
   Typography
   ========================================================================== */

:root {
  /* Font stacks — system fonts for native feel and zero loading overhead */
  --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  --font-mono: 'Cascadia Code', 'Fira Code', 'Consolas', 'SF Mono', 'DejaVu Sans Mono', monospace;

  /* Font size scale */
  --font-xs:   11px;
  --font-sm:   12px;
  --font-base: 14px;
  --font-md:   16px;
  --font-lg:   20px;
  --font-xl:   24px;

  /* Font weights */
  --weight-normal:   400;
  --weight-medium:   500;
  --weight-semibold: 600;
  --weight-bold:     700;
}

/* ==========================================================================
   Animation Durations
   ========================================================================== */

:root {
  --duration-message:  100ms;
  --duration-channel:  120ms;
  --duration-modal:    150ms;
  --duration-sidebar:  200ms;
  --duration-tooltip:  80ms;
  --duration-reaction: 200ms;
  --duration-toolbar:  80ms;
  --delay-tooltip:     300ms;
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --duration-message:  0ms;
    --duration-channel:  0ms;
    --duration-modal:    0ms;
    --duration-sidebar:  0ms;
    --duration-tooltip:  0ms;
    --duration-reaction: 0ms;
    --duration-toolbar:  0ms;
    --delay-tooltip:     0ms;
  }
}

/* ==========================================================================
   Base Styles
   ========================================================================== */

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body {
  height: 100%;
  overflow: hidden;
}

html {
  font-size: var(--font-base);
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: var(--font-primary);
  font-size: var(--font-base);
  font-weight: var(--weight-normal);
  line-height: 1.5;
  background: var(--surface-base);
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ==========================================================================
   Scrollbar (dark theme)
   ========================================================================== */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--surface-highest);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--interactive-muted);
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--surface-highest) transparent;
}

/* ==========================================================================
   Accessibility — Screen Reader Only
   ========================================================================== */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ==========================================================================
   Code / Monospace
   ========================================================================== */

code,
kbd,
pre,
samp {
  font-family: var(--font-mono);
}
